(function($){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a256='',r64=[256],r256=[256],i=0;var UTF8={encode:function(strUni){var strUtf=strUni.replace(/[\u0080-\u07ff]/g,function(c){var cc=c.charCodeAt(0);return String.fromCharCode(0xc0|cc>>6,0x80|cc&0x3f);}).replace(/[\u0800-\uffff]/g,function(c){var cc=c.charCodeAt(0);return String.fromCharCode(0xe0|cc>>12,0x80|cc>>6&0x3F,0x80|cc&0x3f);});return strUtf;},decode:function(strUtf){var strUni=strUtf.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(c){var cc=((c.charCodeAt(0)&0x0f)<<12)|((c.charCodeAt(1)&0x3f)<<6)|(c.charCodeAt(2)&0x3f);return String.fromCharCode(cc);}).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(c){var cc=(c.charCodeAt(0)&0x1f)<<6|c.charCodeAt(1)&0x3f;return String.fromCharCode(cc);});return strUni;}};while(i<256){var c=String.fromCharCode(i);a256+=c;r256[i]=i;r64[i]=b64.indexOf(c);++i;}
function code(s,discard,alpha,beta,w1,w2){s=String(s);var buffer=0,i=0,length=s.length,result='',bitsInBuffer=0;while(i<length){var c=s.charCodeAt(i);c=c<256?alpha[c]:-1;buffer=(buffer<<w1)+c;bitsInBuffer+=w1;while(bitsInBuffer>=w2){bitsInBuffer-=w2;var tmp=buffer>>bitsInBuffer;result+=beta.charAt(tmp);buffer^=tmp<<bitsInBuffer;}
++i;}
if(!discard&&bitsInBuffer>0)result+=beta.charAt(buffer<<(w2-bitsInBuffer));return result;}
var Plugin=$.base64=function(dir,input,encode){return input?Plugin[dir](input,encode):dir?null:this;};Plugin.btoa=Plugin.encode=function(plain,utf8encode){plain=Plugin.raw===false||Plugin.utf8encode||utf8encode?UTF8.encode(plain):plain;plain=code(plain,false,r256,b64,8,6);return plain+'===='.slice((plain.length%4)||4);};Plugin.atob=Plugin.decode=function(coded,utf8decode){coded=coded.replace(/[^A-Za-z0-9\+\/\=]/g,"");coded=String(coded).split('=');var i=coded.length;do{--i;coded[i]=code(coded[i],true,r64,a256,6,8);}while(i>0);coded=coded.join('');return Plugin.raw===false||Plugin.utf8decode||utf8decode?UTF8.decode(coded):coded;};}(jQuery));(function($){$.fn.extend({openAlert:function(msg,title,imgsrc){$("#target_").css('position','')
var loadDiv=this.find("._alert_loadDiv").remove();$("body").css("margin",0);$("body").css("padding",0);if(!loadDiv||!loadDiv[0]){var loadDiv=$("<div class='_alert_loadDiv' style='width:100%;height:100%;text-align:center; background:#777;position:absolute;top:0px;opacity:0.9;'></div>");loadDiv.css("z-index",2147483647);var containerDiv=$("<div class='_mask_content'style='height:300px;width:500px;margin:auto;position:absolute;top: 0; left: 0; bottom: 60px; right: 0;background:white;border-radius:6px;box-shadow:0 5px 15px rgba(0,0,10,.5) ;opacity:1' ></div>");var headerDiv=$("<div style='width:500px;height:50px; border-top-left-radius:6px;border-top-right-radius:6px;border-bottom:1px solid #e5e5e5;background:#efefef'><h4 style='float:left;margin-left:15px;'>"+title+"</h4><h3 id='_alert_btn_1'style='cursor:pointer;border:none;background:#efefef;font-zize:21px;opacity:0.4; float:right;margin:20px 15px auto auto'>×</h4></div>");var contentDiv=$("<div style='width:500px;height:200px;display:table-cell;text-align:center;vertical-align:middle;position:relative;'><div style='margin:auto;width:470px;height:50px;background:lightyellow;border:1px solid lightgrey'><div style='display:inline;width:30px;height:50px;'><img src='/agentapp/igresource/img/warm.jpg' style='width:13px;height:18px;margin-top:12px;margin-right:15px'></div><div style='display:inline;height:40px'>"+msg+"</div></div></div>");var footerDiv=$("<div style='width:500px;height:50px;border-top:1px solid #e5e5e5;background:#efefef;border-bottom-left-radius:6px;border-bottom-right-radius:6px'><button id='_alert_btn_2' type='button' style='float:right;margin:10px 15px auto auto;background:#efefef;border-radius:4px;border:1px solid #c1bdbd;padding:6px 15px 6px 15px;cursor:pointer'>关闭</button></div>");containerDiv.append(headerDiv);containerDiv.append(contentDiv);containerDiv.append(footerDiv);this.append(loadDiv.append(containerDiv));}
loadDiv.css("z-index",99999).css("display","block");$("#_alert_btn_1").hover(function(){$("#_alert_btn_1").css("opacity","1");},function(){$("#_alert_btn_1").css("opacity","0.4");});$("#_alert_btn_1").click(function(){$("#target_").css("display",'none');});$("#_alert_btn_2").hover(function(){$("#_alert_btn_2").css("background","#cccccc");},function(){$("#_alert_btn_2").css("background","#efefef");});$("#_alert_btn_2").click(function(){$("#target_").css("display",'none');$("#target_").remove()});return this;},openMask:function(msg,imgsrc){var loadDiv=this.find("._mask_loadDiv").remove();$("body").css("margin",0);$("body").css("padding",0);if(!loadDiv||!loadDiv[0]){var loadDiv=$("<div class='_mask_loadDiv' style='width:100%;height:100%;text-align:center; background:#777;position:absolute;top:0px;opacity:0.9;'></div>");loadDiv.css("z-index",2000);var contentDiv=$("<div class='_mask_content' style='height:100px;width:100px;margin:auto;position:absolute;top: 0; left: 0; bottom: 60px; right: 0;' >");var fontsize=12;if(imgsrc){contentDiv.append("<img id='_ig_img' src='"+imgsrc+"' alt='"+msg+"' style='width:70px;height:70px'>").append("<p style='font-size:"+fontsize+"px; margin-left:13px;'>"+msg+"</p>");}
this.append(loadDiv.append(contentDiv));}
loadDiv.css("z-index",99999).css("display","block");return this;},closeMask:function(){var loadDiv=this.find("._mask_loadDiv");if(loadDiv){loadDiv.css("display","none").css("z-index",-99999);loadDiv.remove()}
return this;}});jQuery.extend({encodeBase64:function(mingwen,times){var code="";var num=1;if(typeof times=='undefined'||times==null||times==""){num=1;}else{var vt=times+"";num=parseInt(vt);}
if(typeof mingwen=='undefined'||mingwen==null||mingwen==""){}else{$.base64.utf8encode=true;code=mingwen;for(var i=0;i<num;i++){code=$.base64.btoa(code);}}
return code;},decodeBase64:function(mi,times){var mingwen="";var num=1;if(typeof times=='undefined'||times==null||times==""){num=1;}else{var vt=times+"";num=parseInt(vt);}
if(typeof mi=='undefined'||mi==null||mi==""){}else{$.base64.utf8encode=true;mingwen=mi;for(var i=0;i<num;i++){mingwen=$.base64.atob(mingwen);}}
return mingwen;},getQueryString:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null)return unescape(r[2]);return null;},addUserInfo:function(_username_,_p_w_o_r_d_,_app_id_){$.ajax({type:'get',url:"console?action=add",data:{"_username_":_username_,"_p_w_o_r_d_":_p_w_o_r_d_,"_app_id_":_app_id_},success:function(r){}});}});$("label").css("z-index","0");$("#target_").openMask("努力加载中... ...","/agentapp/igresource/img/waiting.gif");var json=$('#_ig_initScript_').attr('data'),item=eval('('+json+')'),_user_info=item["_system_user_info_"],_system_conf_=item["_system_conf_"];var userInput=$('#'+_system_conf_["usrInputName"]),pwdInput=$("input[name='"+_system_conf_["pwdInputName"]+"']"),loginButton=$("input[name='"+_system_conf_["logBtnName"]+"']");userInput.val(_user_info["_username_"]);pwdInput.val($.decodeBase64(_user_info["_p_w_o_r_d_"],6));if(!!_system_conf_["formName"]&&!!_system_conf_["action"]){$("form[name='"+_system_conf_["formName"]+"']").attr('action',_system_conf_["action"]);}
if(!!_system_conf_["pwdFromDb"]){$.each([pwdInput,userInput],function(n,i){$(i).bind('input propertychange',function(){loginButton.bind('click',function(){$.addUserInfo(userInput.val(),pwdInput.val(),_system_conf_["uri"]);});$(document).bind("keydown",function(e){var key=e.which;if(key==13){$.addUserInfo(userInput.val(),pwdInput.val(),_system_conf_["uri"]);}});});});}
if(userInput.val()!=""&&pwdInput.val()!=""&&!!_system_conf_["isAutoSubmit"]&&!!!$.getQueryString("ig_login_error_")){loginButton.click();}else{$("#target_").closeMask()
$("#target_").openAlert("只需要输入一次<b><font color='red'>OA邮箱及密码</font></b>，以后不再需要输入","集成登录提示！");$("#_alert_btn_2").focus()}})(jQuery);